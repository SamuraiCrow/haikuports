SUMMARY="Tracker program to create small sized electronic music"
DESCRIPTION="ProTrekkr (aka NoiseTrekker by Juan Antonio Arguelles Rius aka \
Arguru) is a tracker program combining a software synthesizer together with a \
traditional samples tracker which can be used to create electronic music (like \
psytrance, trance goa, hard acid, IDM, chip, techno, etc.) for small sized \
intros, demos or games."
HOMEPAGE="https://github.com/hitchhikr/protrekkr/"
COPYRIGHT="2008-2024 Franck Charlet.
	Based on Juan Antonio Arguelles Rius's NoiseTrekker."
LICENSE="BSD (2-clause)"
REVISION="1"
srcGitRev="2.6.3git"
SOURCE_URI="https://github.com/samuraicrow/protrekkr/releases/download/$srcGitRev/protrekkr-$srcGitRev.tar.xz"
CHECKSUM_SHA256="5c5c4ff03cdb1dec75c861bca28288fca53e9af7ff1acc255e941f25d4b4c942"
SOURCE_DIR="protrekkr-$srcGitRev"

ARCHITECTURES="?all !x86_gcc2"
SECONDARY_ARCHITECTURES="x86"

PROVIDES="
	protrekkr${secondaryArchSuffix} = $portVersion
	app:Protrekkr = $portVersion
	"
REQUIRES="
	haiku${secondaryArchSuffix}
	lib:libSDL_1.2$secondaryArchSuffix
	"

BUILD_REQUIRES="
	devel:libSDL_1.2$secondaryArchSuffix
	"
BUILD_PREREQUIRES="
	haiku${secondaryArchSuffix}_devel
	cmd:gcc${secondaryArchSuffix}
	cmd:ld${secondaryArchSuffix}
	cmd:make
	"

BUILD()
{
	make -j$jobs -f makefile.haiku
}

INSTALL()
{
	TARGET_DIR=$appsDir/Protrekkr
	mkdir -p $TARGET_DIR
	cd release/distrib
	cp -r history.txt instruments license.txt modules presets ptk_haiku replay reverbs skins $TARGET_DIR
}
